// Pankratov Tech - Translations System
const translations = {
    ru: {
        // Navigation
        nav_home: "Главная",
        nav_services: "Услуги",
        nav_programs: "Программы",
        nav_news: "Новости",
        nav_cabinet: "Кабинет",
        
        // Hero Section
        hero_title: "Добро пожаловать в Pankratov Tech",
        hero_subtitle: "Профессиональные IT-услуги и инновационные решения для вашего бизнеса",
        hero_btn_services: "Наши услуги",
        hero_btn_programs: "Программы",
        
        // Stats
        stat_clients: "Клиентов",
        stat_projects: "Проектов",
        stat_programs: "Программ",
        
        // Services
        services_title: "Наши услуги",
        services_subtitle: "Предоставляем широкий спектр IT-услуг высочайшего качества",
        
        // Programs
        programs_title: "Наши программы",
        programs_subtitle: "Инновационные программные решения от нашей команды",
        
        // News
        news_title: "Новостная доска",
        news_subtitle: "Последние новости и обновления от Pankratov Tech",
        
        // Auth
        login_title: "Вход в систему",
        tab_login: "Вход",
        tab_register: "Регистрация",
        or: "или",
        email: "Email",
        password: "Пароль",
        name: "Имя",
        phone: "Телефон (необязательно)",
        country: "Страна",
        confirm_password: "Подтвердите пароль",
        login_btn: "Войти",
        register_btn: "Зарегистрироваться",
        
        // Cabinet
        cabinet_login_title: "Войдите в личный кабинет",
        cabinet_login_subtitle: "Для доступа к личному кабинету необходимо войти в систему",
        cabinet_login_btn: "Войти в систему",
        
        // Orders
        order_title: "Оформление заказа",
        my_orders: "Мои заказы",
        order_history: "История заказов",
        order_status: "Статус заказа",
        
        // Common
        loading: "Загрузка...",
        save: "Сохранить",
        cancel: "Отмена",
        close: "Закрыть",
        edit: "Редактировать",
        delete: "Удалить",
        download: "Скачать",
        upload: "Загрузить",
        
        // Notifications
        success: "Успешно",
        error: "Ошибка",
        warning: "Предупреждение",
        info: "Информация"
    },
    
    en: {
        // Navigation
        nav_home: "Home",
        nav_services: "Services",
        nav_programs: "Programs",
        nav_news: "News",
        nav_cabinet: "Cabinet",
        
        // Hero Section
        hero_title: "Welcome to Pankratov Tech",
        hero_subtitle: "Professional IT services and innovative solutions for your business",
        hero_btn_services: "Our Services",
        hero_btn_programs: "Programs",
        
        // Stats
        stat_clients: "Clients",
        stat_projects: "Projects",
        stat_programs: "Programs",
        
        // Services
        services_title: "Our Services",
        services_subtitle: "We provide a wide range of highest quality IT services",
        
        // Programs
        programs_title: "Our Programs",
        programs_subtitle: "Innovative software solutions from our team",
        
        // News
        news_title: "News Board",
        news_subtitle: "Latest news and updates from Pankratov Tech",
        
        // Auth
        login_title: "Login",
        tab_login: "Login",
        tab_register: "Register",
        or: "or",
        email: "Email",
        password: "Password",
        name: "Name",
        phone: "Phone (optional)",
        country: "Country",
        confirm_password: "Confirm Password",
        login_btn: "Login",
        register_btn: "Register",
        
        // Cabinet
        cabinet_login_title: "Login to Personal Cabinet",
        cabinet_login_subtitle: "You need to login to access your personal cabinet",
        cabinet_login_btn: "Login",
        
        // Orders
        order_title: "Place Order",
        my_orders: "My Orders",
        order_history: "Order History",
        order_status: "Order Status",
        
        // Common
        loading: "Loading...",
        save: "Save",
        cancel: "Cancel",
        close: "Close",
        edit: "Edit",
        delete: "Delete",
        download: "Download",
        upload: "Upload",
        
        // Notifications
        success: "Success",
        error: "Error",
        warning: "Warning",
        info: "Information"
    },
    
    uk: {
        // Navigation
        nav_home: "Головна",
        nav_services: "Послуги",
        nav_programs: "Програми",
        nav_news: "Новини",
        nav_cabinet: "Кабінет",
        
        // Hero Section
        hero_title: "Ласкаво просимо до Pankratov Tech",
        hero_subtitle: "Професійні IT-послуги та інноваційні рішення для вашого бізнесу",
        hero_btn_services: "Наші послуги",
        hero_btn_programs: "Програми",
        
        // Stats
        stat_clients: "Клієнтів",
        stat_projects: "Проектів",
        stat_programs: "Програм",
        
        // Services
        services_title: "Наші послуги",
        services_subtitle: "Надаємо широкий спектр IT-послуг найвищої якості",
        
        // Programs
        programs_title: "Наші програми",
        programs_subtitle: "Інноваційні програмні рішення від нашої команди",
        
        // News
        news_title: "Дошка новин",
        news_subtitle: "Останні новини та оновлення від Pankratov Tech",
        
        // Auth
        login_title: "Вхід до системи",
        tab_login: "Вхід",
        tab_register: "Реєстрація",
        or: "або",
        email: "Email",
        password: "Пароль",
        name: "Ім'я",
        phone: "Телефон (необов'язково)",
        country: "Країна",
        confirm_password: "Підтвердіть пароль",
        login_btn: "Увійти",
        register_btn: "Зареєструватися",
        
        // Cabinet
        cabinet_login_title: "Увійдіть до особистого кабінету",
        cabinet_login_subtitle: "Для доступу до особистого кабінету необхідно увійти до системи",
        cabinet_login_btn: "Увійти до системи",
        
        // Orders
        order_title: "Оформлення замовлення",
        my_orders: "Мої замовлення",
        order_history: "Історія замовлень",
        order_status: "Статус замовлення",
        
        // Common
        loading: "Завантаження...",
        save: "Зберегти",
        cancel: "Скасувати",
        close: "Закрити",
        edit: "Редагувати",
        delete: "Видалити",
        download: "Завантажити",
        upload: "Завантажити",
        
        // Notifications
        success: "Успішно",
        error: "Помилка",
        warning: "Попередження",
        info: "Інформація"
    }
};

// Language detection and management
class LanguageManager {
    constructor() {
        this.currentLanguage = this.detectLanguage();
        this.init();
    }
    
    detectLanguage() {
        // Check localStorage first
        const saved = localStorage.getItem('pankratov_language');
        if (saved && translations[saved]) {
            return saved;
        }
        
        // Detect by user's location/browser language
        const browserLang = navigator.language.toLowerCase();
        
        if (browserLang.startsWith('ru')) return 'ru';
        if (browserLang.startsWith('uk')) return 'uk';
        if (browserLang.startsWith('en')) return 'en';
        
        // Default to Russian
        return 'ru';
    }
    
    init() {
        this.updateLanguage();
        this.bindEvents();
    }
    
    bindEvents() {
        // Language selector
        const langBtn = document.getElementById('lang-btn');
        const langDropdown = document.getElementById('lang-dropdown');
        
        if (langBtn && langDropdown) {
            langBtn.addEventListener('click', (e) => {
                e.stopPropagation();
                langDropdown.classList.toggle('active');
            });
            
            document.addEventListener('click', () => {
                langDropdown.classList.remove('active');
            });
            
            langDropdown.addEventListener('click', (e) => {
                e.stopPropagation();
            });
            
            // Language options
            langDropdown.querySelectorAll('.lang-option').forEach(option => {
                option.addEventListener('click', () => {
                    const lang = option.dataset.lang;
                    this.setLanguage(lang);
                    langDropdown.classList.remove('active');
                });
            });
        }
    }
    
    setLanguage(lang) {
        if (!translations[lang]) return;
        
        this.currentLanguage = lang;
        localStorage.setItem('pankratov_language', lang);
        this.updateLanguage();
    }
    
    updateLanguage() {
        // Update current language display
        const currentLangEl = document.getElementById('current-lang');
        if (currentLangEl) {
            currentLangEl.textContent = this.currentLanguage.toUpperCase();
        }
        
        // Update all elements with data-lang attribute
        document.querySelectorAll('[data-lang]').forEach(element => {
            const key = element.getAttribute('data-lang');
            const translation = this.translate(key);
            
            if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translation;
            } else if (element.tagName === 'INPUT' && element.placeholder !== undefined) {
                element.placeholder = translation;
            } else {
                element.textContent = translation;
            }
        });
        
        // Update document language
        document.documentElement.lang = this.currentLanguage;
    }
    
    translate(key) {
        return translations[this.currentLanguage][key] || translations['ru'][key] || key;
    }
    
    getCurrentLanguage() {
        return this.currentLanguage;
    }
}

// Initialize language manager
let languageManager;
document.addEventListener('DOMContentLoaded', () => {
    languageManager = new LanguageManager();
});

// Global translation function
function t(key) {
    return languageManager ? languageManager.translate(key) : key;
}